<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="description" content="MiVE: Multiscale Vision-language features for reference-guided video Editing">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>MiVE - Video Editing Comparison</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro" rel="stylesheet">

  <!-- Bulma CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    /* Base styles */
    body {
      font-family: 'Noto Sans', sans-serif;
      background-color: #ffffff;
    }
    
    .hero-body {
      padding-top: 2rem;
      padding-bottom: 2rem;
    }
    
    .title.is-1 {
      font-family: 'Google Sans', sans-serif;
      font-weight: 700;
    }
    
    .publication-title {
      font-size: 1.75rem;
      margin-bottom: 1rem;
      text-align: center;
      line-height: 1.3;
    }

    /* Section styling */
    .comparison-section {
      padding: 2rem 0;
    }
    
    .section-title {
      font-family: 'Google Sans', sans-serif;
      font-size: 1.8rem;
      font-weight: 600;
      text-align: center;
      margin-bottom: 1.5rem;
      color: #333;
    }

    /* Thumbnail selector */
    .thumbnail-selector {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-bottom: 1.5rem;
      padding: 0 1rem;
    }
    
    .thumb {
      width: 70px;
      height: 70px;
      border-radius: 8px;
      cursor: pointer;
      object-fit: cover;
      border: 3px solid transparent;
      transition: all 0.3s ease;
      opacity: 0.6;
    }
    
    .thumb:hover {
      opacity: 1;
      transform: scale(1.05);
    }
    
    .thumb.active {
      border-color: #4CAF50;
      opacity: 1;
      box-shadow: 0 0 12px rgba(76, 175, 80, 0.5);
    }
    
    .thumb-number {
      position: absolute;
      bottom: 4px;
      right: 4px;
      background: rgba(0,0,0,0.7);
      color: white;
      font-size: 0.65rem;
      padding: 2px 5px;
      border-radius: 4px;
    }
    
    .thumb-wrapper {
      position: relative;
      display: inline-block;
    }

    /* Comparison result container */
    .comparison-result {
      display: none;
    }
    
    .comparison-result.active {
      display: block;
    }

    /* ========== Two-row layout ========== */
    
    /* Row 1: Reference + Original (centered, larger) */
    .input-row {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 1.5rem;
      padding: 0 1rem;
    }
    
    .input-cell {
      text-align: center;
    }
    
    /* Landscape videos (Simple) - input row */
    .input-cell.landscape img,
    .input-cell.landscape video {
      width: 320px;
      height: 180px;
      border-radius: 8px;
      object-fit: contain;
      background: #f0f0f0;
    }
    
    /* Portrait videos (Complex) - input row */
    .input-cell.portrait img,
    .input-cell.portrait video {
      width: 180px;
      height: 320px;
      border-radius: 8px;
      object-fit: contain;
      background: #f0f0f0;
    }
    
    /* Row 2: Methods grid */
    .methods-row {
      display: flex;
      justify-content: center;
      gap: 12px;
      flex-wrap: wrap;
      padding: 0 1rem;
    }
    
    .method-cell {
      text-align: center;
    }
    
    /* Landscape videos (Simple) - methods row */
    .method-cell.landscape video {
      width: 220px;
      height: 124px;
      border-radius: 6px;
      object-fit: contain;
      background: #f0f0f0;
    }
    
    /* Portrait videos (Complex) - methods row */
    .method-cell.portrait video {
      width: 120px;
      height: 214px;
      border-radius: 6px;
      object-fit: contain;
      background: #f0f0f0;
    }

    /* Method label */
    .method-label {
      margin-top: 0.4rem;
      font-size: 0.8rem;
      font-family: 'Google Sans', sans-serif;
      color: #555;
      font-weight: 500;
    }
    
    .method-label.highlight {
      color: #4CAF50;
      font-weight: 700;
    }
    
    .input-label {
      margin-top: 0.5rem;
      font-size: 0.9rem;
      font-family: 'Google Sans', sans-serif;
      color: #333;
      font-weight: 600;
    }

    /* Playback controls */
    .playback-controls {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin-top: 1rem;
      margin-bottom: 1.5rem;
    }
    
    .control-btn {
      background: #333;
      color: white;
      border: none;
      padding: 0.4rem 1.2rem;
      border-radius: 20px;
      cursor: pointer;
      font-size: 0.85rem;
      transition: background 0.3s;
      display: flex;
      align-items: center;
      gap: 0.4rem;
    }
    
    .control-btn:hover {
      background: #555;
    }
    
    .control-btn.playing {
      background: #4CAF50;
    }

    /* Divider */
    .section-divider {
      max-width: 800px;
      margin: 3rem auto;
      border: none;
      border-top: 1px solid #ddd;
    }

    /* Row separator within section */
    .row-label {
      text-align: center;
      font-size: 0.85rem;
      color: #888;
      margin-bottom: 0.8rem;
      font-weight: 500;
    }

    /* Footer */
    .footer {
      background-color: #fafafa;
      padding: 2rem 1.5rem;
    }

    /* Loading overlay */
    .comparison-result {
      position: relative;
      min-height: 200px;
    }
    
    .loading-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(255, 255, 255, 0.95);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 10;
      border-radius: 8px;
    }
    
    .spinner {
      width: 40px;
      height: 40px;
      border: 4px solid #e0e0e0;
      border-top-color: #4CAF50;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .loading-text {
      margin-top: 12px;
      color: #666;
      font-size: 0.9rem;
      font-family: 'Google Sans', sans-serif;
    }
    
    .loading-overlay.hidden {
      display: none;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .input-cell.landscape img,
      .input-cell.landscape video {
        width: 240px;
        height: 135px;
      }
      .input-cell.portrait img,
      .input-cell.portrait video {
        width: 135px;
        height: 240px;
      }
      .method-cell.landscape video {
        width: 150px;
        height: 84px;
      }
      .method-cell.portrait video {
        width: 80px;
        height: 142px;
      }
    }
  </style>
</head>
<body>

  <!-- Header -->
  <section class="hero">
    <div class="hero-body">
      <div class="container has-text-centered">
        <h1 class="title is-1 publication-title">
          MiVE: Multiscale Vision-language Features for<br>Reference-guided Video Editing
        </h1>
        <p class="subtitle is-5" style="color: #555; margin-top: 1rem;">
          Anonymous Authors
        </p>
        <p style="color: #888; font-size: 0.95rem; margin-top: 1.5rem;">
          Click thumbnails to switch samples. All videos play synchronized.
        </p>
      </div>
    </div>
  </section>

  <!-- ========================================== -->
  <!-- Complex Scene Comparisons (Portrait) -->
  <!-- ========================================== -->
  <section class="comparison-section" id="complex-section">
    <div class="container">
      <h2 class="section-title">Complex Scene Comparisons</h2>
      
      <!-- Thumbnail selector -->
      <div class="thumbnail-selector" id="complex-thumbs">
        <div class="thumb-wrapper">
          <img class="thumb active" src="./contents/complex/edited_frame/3.jpg" data-id="3" onclick="showComplex(3)">
          <span class="thumb-number">1</span>
        </div>
        <div class="thumb-wrapper">
          <img class="thumb" src="./contents/complex/edited_frame/2.jpeg" data-id="2" onclick="showComplex(2)">
          <span class="thumb-number">2</span>
        </div>
        <div class="thumb-wrapper">
          <img class="thumb" src="./contents/complex/edited_frame/1.jpeg" data-id="1" onclick="showComplex(1)">
          <span class="thumb-number">3</span>
        </div>
        <div class="thumb-wrapper">
          <img class="thumb" src="./contents/complex/edited_frame/4.jpeg" data-id="4" onclick="showComplex(4)">
          <span class="thumb-number">4</span>
        </div>
        <div class="thumb-wrapper">
          <img class="thumb" src="./contents/complex/edited_frame/5.jpg" data-id="5" onclick="showComplex(5)">
          <span class="thumb-number">5</span>
        </div>
        <div class="thumb-wrapper">
          <img class="thumb" src="./contents/complex/edited_frame/6.jpeg" data-id="6" onclick="showComplex(6)">
          <span class="thumb-number">6</span>
        </div>
        <div class="thumb-wrapper">
          <img class="thumb" src="./contents/complex/edited_frame/7.jpeg" data-id="7" onclick="showComplex(7)">
          <span class="thumb-number">7</span>
        </div>
        <div class="thumb-wrapper">
          <img class="thumb" src="./contents/complex/edited_frame/8.jpeg" data-id="8" onclick="showComplex(8)">
          <span class="thumb-number">8</span>
        </div>
        <div class="thumb-wrapper">
          <img class="thumb" src="./contents/complex/edited_frame/9.jpeg" data-id="9" onclick="showComplex(9)">
          <span class="thumb-number">9</span>
        </div>
        <div class="thumb-wrapper">
          <img class="thumb" src="./contents/complex/edited_frame/10.jpeg" data-id="10" onclick="showComplex(10)">
          <span class="thumb-number">10</span>
        </div>
      </div>

      <!-- Playback controls -->
      <div class="playback-controls">
        <button class="control-btn playing" id="complex-play-btn" onclick="toggleComplexPlayback()">
          <i class="fas fa-pause"></i> <span>Pause</span>
        </button>
        <button class="control-btn" onclick="restartComplexVideos()">
          <i class="fas fa-redo"></i> <span>Restart</span>
        </button>
      </div>

      <!-- Comparison results -->
      <div id="complex-results">
        <!-- Samples 1-10 will be generated by JavaScript -->
      </div>
    </div>
  </section>

  <hr class="section-divider">

  <!-- ========================================== -->
  <!-- Simple Scene Comparisons (Landscape) -->
  <!-- ========================================== -->
  <section class="comparison-section" id="simple-section">
    <div class="container">
      <h2 class="section-title">Simple Scene Comparisons</h2>
      
      <!-- Thumbnail selector -->
      <div class="thumbnail-selector" id="simple-thumbs">
        <div class="thumb-wrapper">
          <img class="thumb active" src="./contents/simple/edited_first_frame/1.png" data-id="1" onclick="showSimple(1)">
          <span class="thumb-number">1</span>
        </div>
        <div class="thumb-wrapper">
          <img class="thumb" src="./contents/simple/edited_first_frame/2.png" data-id="2" onclick="showSimple(2)">
          <span class="thumb-number">2</span>
        </div>
        <div class="thumb-wrapper">
          <img class="thumb" src="./contents/simple/edited_first_frame/3.png" data-id="3" onclick="showSimple(3)">
          <span class="thumb-number">3</span>
        </div>
        <div class="thumb-wrapper">
          <img class="thumb" src="./contents/simple/edited_first_frame/4.png" data-id="4" onclick="showSimple(4)">
          <span class="thumb-number">4</span>
        </div>
        <div class="thumb-wrapper">
          <img class="thumb" src="./contents/simple/edited_first_frame/5.png" data-id="5" onclick="showSimple(5)">
          <span class="thumb-number">5</span>
        </div>
        <div class="thumb-wrapper">
          <img class="thumb" src="./contents/simple/edited_first_frame/6.png" data-id="6" onclick="showSimple(6)">
          <span class="thumb-number">6</span>
        </div>
        <div class="thumb-wrapper">
          <img class="thumb" src="./contents/simple/edited_first_frame/7.png" data-id="7" onclick="showSimple(7)">
          <span class="thumb-number">7</span>
        </div>
        <div class="thumb-wrapper">
          <img class="thumb" src="./contents/simple/edited_first_frame/8.png" data-id="8" onclick="showSimple(8)">
          <span class="thumb-number">8</span>
        </div>
        <div class="thumb-wrapper">
          <img class="thumb" src="./contents/simple/edited_first_frame/9.png" data-id="9" onclick="showSimple(9)">
          <span class="thumb-number">9</span>
        </div>
        <div class="thumb-wrapper">
          <img class="thumb" src="./contents/simple/edited_first_frame/10.png" data-id="10" onclick="showSimple(10)">
          <span class="thumb-number">10</span>
        </div>
      </div>

      <!-- Playback controls -->
      <div class="playback-controls">
        <button class="control-btn playing" id="simple-play-btn" onclick="toggleSimplePlayback()">
          <i class="fas fa-pause"></i> <span>Pause</span>
        </button>
        <button class="control-btn" onclick="restartSimpleVideos()">
          <i class="fas fa-redo"></i> <span>Restart</span>
        </button>
      </div>

      <!-- Comparison results -->
      <div id="simple-results">
        <!-- Samples 1-10 will be generated by JavaScript -->
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="content has-text-centered">        
        <div style="max-width: 700px; margin: 0 auto; text-align: left;">
          <p style="color: #555; font-size: 0.85rem; font-weight: 600; margin-bottom: 0.5rem;">
            Ethical Considerations
          </p>
          <p style="color: #777; font-size: 0.8rem; line-height: 1.6;">
            Part of images and videos are derived from real-world sources solely to demonstrate the capabilities of this research, e.g., editing quality, temporal consistency, and visual fidelity. The generated content is for academic use only and commercial use is not permitted.
          </p>
        </div>
      </div>
    </div>
  </footer>

  <!-- JavaScript -->
  <script>
    // ========================================
    // Configuration
    // ========================================
    const simpleConfig = {
      basePath: './contents/simple',
      editedFrameFolder: 'edited_first_frame',
      editedFrameExt: 'png',
      methods: [
        { folder: 'lucyedit', label: 'LucyEdit' },
        { folder: 'vace', label: 'VACE' },
        { folder: 'videocof', label: 'VideoCOF' },
        { folder: 'Kling', label: 'Kling' },
        { folder: 'mive', label: 'Ours', highlight: true }
      ],
      orientation: 'landscape'
    };

    const complexConfig = {
      basePath: './contents/complex',
      editedFrameFolder: 'edited_frame',
      // Mixed extensions for complex
      editedFrameExts: {
        1: 'jpeg', 2: 'jpeg', 3: 'jpg', 4: 'jpeg', 5: 'jpg',
        6: 'jpeg', 7: 'jpeg', 8: 'jpeg', 9: 'jpeg', 10: 'jpeg'
      },
      methods: [
        { folder: 'lucy_edit', label: 'LucyEdit' },
        { folder: 'wan_animate', label: 'WanAnimate' },
        { folder: 'videocof', label: 'VideoCOF' },
        { folder: 'Kling', label: 'Kling' },
        { folder: 'mive', label: 'Ours', highlight: true }
      ],
      orientation: 'portrait'
    };

    // ========================================
    // State management
    // ========================================
    let simplePlayState = true;
    let complexPlayState = true;

    // ========================================
    // Generate HTML for comparison results
    // ========================================
    function generateComparisonHTML(config, sampleId) {
      const orient = config.orientation;
      const ext = config.editedFrameExts ? config.editedFrameExts[sampleId] : config.editedFrameExt;
      
      let html = `
        <div class="loading-overlay">
          <div class="spinner"></div>
          <div class="loading-text">Loading videos...</div>
        </div>
        <div class="row-label">Input</div>
        <div class="input-row">
          <div class="input-cell ${orient}">
            <img src="${config.basePath}/${config.editedFrameFolder}/${sampleId}.${ext}" alt="Reference">
            <div class="input-label">Edited Frame</div>
          </div>
          <div class="input-cell ${orient}">
            <video muted playsinline preload="auto" src="${config.basePath}/ori_videos/${sampleId}.mp4"></video>
            <div class="input-label">Original Video</div>
          </div>
        </div>
        
        <div class="row-label">Method Results</div>
        <div class="methods-row">
      `;
      
      config.methods.forEach(method => {
        const highlightClass = method.highlight ? 'highlight' : '';
        html += `
          <div class="method-cell ${orient}">
            <video muted playsinline preload="auto" src="${config.basePath}/${method.folder}/${sampleId}.mp4"></video>
            <div class="method-label ${highlightClass}">${method.label}</div>
          </div>
        `;
      });
      
      html += '</div>';
      return html;
    }

    // ========================================
    // Lazy Loading Functions
    // ========================================
    async function loadSampleContent(section, id) {
      const config = section === 'simple' ? simpleConfig : complexConfig;
      const container = document.getElementById(`${section}-${id}`);
      
      // Skip if already loaded
      if (container.dataset.loaded === 'true') {
        // Just restart videos if already loaded
        const videos = container.querySelectorAll('video');
        videos.forEach(v => {
          v.currentTime = 0;
          v.play();
        });
        return;
      }
      
      // Generate HTML with loading overlay
      container.innerHTML = generateComparisonHTML(config, id);
      
      const videos = container.querySelectorAll('video');
      const loadingOverlay = container.querySelector('.loading-overlay');
      
      // Wait for all videos to be ready
      try {
        await Promise.all([...videos].map(video => 
          new Promise((resolve, reject) => {
            // Check if already ready
            if (video.readyState >= 3) {
              resolve();
              return;
            }
            
            const onReady = () => {
              video.removeEventListener('canplaythrough', onReady);
              video.removeEventListener('error', onError);
              resolve();
            };
            
            const onError = () => {
              video.removeEventListener('canplaythrough', onReady);
              video.removeEventListener('error', onError);
              resolve(); // Resolve anyway to not block others
            };
            
            video.addEventListener('canplaythrough', onReady);
            video.addEventListener('error', onError);
            
            // Timeout fallback (10 seconds)
            setTimeout(() => {
              video.removeEventListener('canplaythrough', onReady);
              video.removeEventListener('error', onError);
              resolve();
            }, 10000);
          })
        ));
      } catch (e) {
        console.warn('Some videos failed to load:', e);
      }
      
      // Hide loading overlay
      if (loadingOverlay) {
        loadingOverlay.classList.add('hidden');
      }
      
      // Mark as loaded
      container.dataset.loaded = 'true';
      
      // Sync play all videos
      syncVideosInContainer(container, section);
      
      // Update play button state
      if (section === 'simple') {
        simplePlayState = true;
        const btn = document.getElementById('simple-play-btn');
        btn.innerHTML = '<i class="fas fa-pause"></i> <span>Pause</span>';
        btn.classList.add('playing');
      } else {
        complexPlayState = true;
        const btn = document.getElementById('complex-play-btn');
        btn.innerHTML = '<i class="fas fa-pause"></i> <span>Pause</span>';
        btn.classList.add('playing');
      }
    }

    function initializeResults() {
      // Generate Simple containers (content loaded on demand)
      const simpleResults = document.getElementById('simple-results');
      for (let i = 1; i <= 10; i++) {
        const div = document.createElement('div');
        div.className = 'comparison-result' + (i === 1 ? ' active' : '');
        div.id = `simple-${i}`;
        div.dataset.loaded = 'false';
        simpleResults.appendChild(div);
      }

      // Generate Complex containers (content loaded on demand)
      // Note: case 3 is now in first visual position
      const complexResults = document.getElementById('complex-results');
      for (let i = 1; i <= 10; i++) {
        const div = document.createElement('div');
        div.className = 'comparison-result' + (i === 3 ? ' active' : '');
        div.id = `complex-${i}`;
        div.dataset.loaded = 'false';
        complexResults.appendChild(div);
      }
      
      // Only load the first sample of each section initially
      // Complex is on top, so load it first (case 3 is now in first position)
      loadSampleContent('complex', 3);
      loadSampleContent('simple', 1);
    }

    // ========================================
    // Simple Section Functions
    // ========================================
    function showSimple(id) {
      // Update thumbnail active state
      document.querySelectorAll('#simple-thumbs .thumb').forEach(thumb => {
        thumb.classList.remove('active');
        if (parseInt(thumb.dataset.id) === id) {
          thumb.classList.add('active');
        }
      });
      
      // Pause videos in currently active result
      const currentActive = document.querySelector('#simple-results .comparison-result.active');
      if (currentActive) {
        currentActive.querySelectorAll('video').forEach(v => v.pause());
      }
      
      // Switch active result
      document.querySelectorAll('#simple-results .comparison-result').forEach(result => {
        result.classList.remove('active');
      });
      
      const target = document.getElementById(`simple-${id}`);
      if (target) {
        target.classList.add('active');
        // Load content if not loaded yet
        loadSampleContent('simple', id);
      }
    }

    function toggleSimplePlayback() {
      const btn = document.getElementById('simple-play-btn');
      const activeResult = document.querySelector('#simple-results .comparison-result.active');
      const videos = activeResult.querySelectorAll('video');
      
      if (simplePlayState) {
        videos.forEach(v => v.pause());
        btn.innerHTML = '<i class="fas fa-play"></i> <span>Play</span>';
        btn.classList.remove('playing');
      } else {
        videos.forEach(v => v.play());
        btn.innerHTML = '<i class="fas fa-pause"></i> <span>Pause</span>';
        btn.classList.add('playing');
      }
      simplePlayState = !simplePlayState;
    }

    function restartSimpleVideos() {
      const activeResult = document.querySelector('#simple-results .comparison-result.active');
      syncVideosInContainer(activeResult, 'simple');
      simplePlayState = true;
      const btn = document.getElementById('simple-play-btn');
      btn.innerHTML = '<i class="fas fa-pause"></i> <span>Pause</span>';
      btn.classList.add('playing');
    }

    // ========================================
    // Complex Section Functions
    // ========================================
    function showComplex(id) {
      // Update thumbnail active state
      document.querySelectorAll('#complex-thumbs .thumb').forEach(thumb => {
        thumb.classList.remove('active');
        if (parseInt(thumb.dataset.id) === id) {
          thumb.classList.add('active');
        }
      });
      
      // Pause videos in currently active result
      const currentActive = document.querySelector('#complex-results .comparison-result.active');
      if (currentActive) {
        currentActive.querySelectorAll('video').forEach(v => v.pause());
      }
      
      // Switch active result
      document.querySelectorAll('#complex-results .comparison-result').forEach(result => {
        result.classList.remove('active');
      });
      
      const target = document.getElementById(`complex-${id}`);
      if (target) {
        target.classList.add('active');
        // Load content if not loaded yet
        loadSampleContent('complex', id);
      }
    }

    function toggleComplexPlayback() {
      const btn = document.getElementById('complex-play-btn');
      const activeResult = document.querySelector('#complex-results .comparison-result.active');
      const videos = activeResult.querySelectorAll('video');
      
      if (complexPlayState) {
        videos.forEach(v => v.pause());
        btn.innerHTML = '<i class="fas fa-play"></i> <span>Play</span>';
        btn.classList.remove('playing');
      } else {
        videos.forEach(v => v.play());
        btn.innerHTML = '<i class="fas fa-pause"></i> <span>Pause</span>';
        btn.classList.add('playing');
      }
      complexPlayState = !complexPlayState;
    }

    function restartComplexVideos() {
      const activeResult = document.querySelector('#complex-results .comparison-result.active');
      syncVideosInContainer(activeResult, 'complex');
      complexPlayState = true;
      const btn = document.getElementById('complex-play-btn');
      btn.innerHTML = '<i class="fas fa-pause"></i> <span>Pause</span>';
      btn.classList.add('playing');
    }

    // ========================================
    // Video Synchronization
    // ========================================
    function syncVideosInContainer(container, section) {
      const videos = container.querySelectorAll('video');
      videos.forEach(v => {
        v.currentTime = 0;
        v.play();
      });
      
      // Listen for video end on the first video to update button state
      if (videos.length > 0) {
        const firstVideo = videos[0];
        // Remove old listener to avoid duplicates
        firstVideo.onended = null;
        firstVideo.onended = function() {
          if (section === 'simple') {
            simplePlayState = false;
            const btn = document.getElementById('simple-play-btn');
            btn.innerHTML = '<i class="fas fa-play"></i> <span>Play</span>';
            btn.classList.remove('playing');
          } else if (section === 'complex') {
            complexPlayState = false;
            const btn = document.getElementById('complex-play-btn');
            btn.innerHTML = '<i class="fas fa-play"></i> <span>Play</span>';
            btn.classList.remove('playing');
          }
        };
      }
    }

    function setupPeriodicSync() {
      setInterval(() => {
        // Sync simple section
        const simpleActive = document.querySelector('#simple-results .comparison-result.active');
        if (simpleActive && simplePlayState) {
          const videos = Array.from(simpleActive.querySelectorAll('video'));
          if (videos.length > 0) {
            const masterTime = videos[0].currentTime;
            videos.forEach(v => {
              if (Math.abs(v.currentTime - masterTime) > 0.1) {
                v.currentTime = masterTime;
              }
            });
          }
        }
        
        // Sync complex section
        const complexActive = document.querySelector('#complex-results .comparison-result.active');
        if (complexActive && complexPlayState) {
          const videos = Array.from(complexActive.querySelectorAll('video'));
          if (videos.length > 0) {
            const masterTime = videos[0].currentTime;
            videos.forEach(v => {
              if (Math.abs(v.currentTime - masterTime) > 0.1) {
                v.currentTime = masterTime;
              }
            });
          }
        }
      }, 500);
    }

    // ========================================
    // Initialization
    // ========================================
    document.addEventListener('DOMContentLoaded', function() {
      // Generate containers and load first samples
      initializeResults();
      
      // Setup periodic sync for playing videos
      setupPeriodicSync();
    });
  </script>

</body>
</html>
